<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AS Earn Hub</title>
    <link rel="stylesheet" href="style.css">
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Monetag SDK -->
    <script src='//libtl.com/sdk.js' data-zone='9725833' data-sdk='show_9725833'></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1 class="app-title">AS Earn Hub</h1>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Home Section -->
            <section id="home" class="screen active">
                <div class="glassmorphism-card profile-card">
                    <img id="user-avatar" src="https://via.placeholder.com/60" alt="User Avatar" class="profile-avatar">
                    <h2 id="profile-name" class="profile-name">Loading...</h2>
                    <div class="balance-display">
                        <span class="balance-label">AS Points:</span>
                        <span id="as-points-balance" class="as-points-value">0</span>
                    </div>
                </div>

                <div class="glassmorphism-card checkin-card">
                    <h3>Daily Check-in Streak</h3>
                    <div class="streak-indicator" id="streak-indicator">
                        <!-- Streak capsules will be rendered here by JS -->
                    </div>
                    <button id="claim-checkin-btn" class="cta-button pulse">CLAIM DAY 1</button>
                    <p id="checkin-message" class="info-text"></p>
                </div>

                <div class="glassmorphism-card earnings-summary-card">
                    <h3>Today's Earnings</h3>
                    <p>ADS: <span id="today-ads-earnings">0</span> AS Points</p>
                    <p>TG Tasks: <span id="today-tg-earnings">0</span> AS Points</p>
                    <p>Referrals: <span id="today-referral-earnings">0</span> AS Points</p>
                    <div class="daily-goal-progress">
                        <p>Daily Goal: 0/<span id="daily-goal-target">50</span> AS Points</p>
                        <div class="progress-bar">
                            <div class="progress-fill" id="daily-goal-progress-fill"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Ads Task Section -->
            <section id="ads-tasks" class="screen">
                <div class="glassmorphism-card">
                    <h3>Monetag Ads Task <span class="badge">0.35 AS/Ad</span></h3>
                    <p class="info-text">Complete ads to earn AS Points.</p>
                    <div class="ad-metrics">
                        <p>Daily Completed: <span id="ads-daily-completed">0</span> / 120</p>
                        <p>Hourly Completed: <span id="ads-hourly-completed">0</span> / 15</p>
                        <p>Lifetime Completed: <span id="ads-lifetime-completed">0</span></p>
                    </div>
                    <button id="start-ad-task-btn" class="cta-button gradient-wave">START AD TASK</button>
                    <p id="ad-task-status" class="info-text"></p>
                </div>
            </section>

            <!-- Telegram Tasks Section -->
            <section id="tg-tasks" class="screen">
                <div class="glassmorphism-card">
                    <h3>Telegram Join Tasks <span class="badge">1 AS/Task</span></h3>
                    <p class="info-text">Join these channels/groups to earn AS Points.</p>
                    <ul class="task-list" id="tg-task-list">
                        <li data-task-id="join-asearnhub-channel" data-link="https://t.me/ASearnhub" class="tg-task-item">
                            <span>Join Channel: AS Earn Hub</span>
                            <button class="join-btn">Join</button>
                            <span class="task-status"></span>
                        </li>
                        <li data-task-id="join-asearnhub-group" data-link="https://t.me/ASearnhubchat" class="tg-task-item">
                            <span>Join Group: AS Earn Hub Chat</span>
                            <button class="join-btn">Join</button>
                            <span class="task-status"></span>
                        </li>
                        <li data-task-id="join-scalpingargha" data-link="https://t.me/Scalpingargha" class="tg-task-item">
                            <span>Join Channel: Scalpingargha</span>
                            <button class="join-btn">Join</button>
                            <span class="task-status"></span>
                        </li>
                        <li data-task-id="join-earningsceret" data-link="https://t.me/earningsceret" class="tg-task-item">
                            <span>Join Channel: Earningsceret</span>
                            <button class="join-btn">Join</button>
                            <span class="task-status"></span>
                        </li>
                    </ul>
                    <p id="tg-task-message" class="info-text"></p>
                </div>
            </section>

            <!-- Referral Section -->
            <section id="referrals" class="screen">
                <div class="glassmorphism-card">
                    <h3>Referral System</h3>
                    <p class="info-text">Refer a friend and earn 20 AS points after they complete initial tasks. Your friend gets 5 AS points!</p>
                    <div class="referral-code-box">
                        <label for="referral-code-input">Your Referral Code:</label>
                        <div class="input-group">
                            <input type="text" id="referral-code-input" readonly value="AS[USERNAME]">
                            <button id="copy-referral-btn" class="icon-button">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="referral-code-entry">
                        <label for="enter-referral-code">Enter Friend's Code:</label>
                        <div class="input-group">
                            <input type="text" id="enter-referral-code" placeholder="ASUsername123" maxlength="20">
                            <button id="submit-referral-code-btn" class="cta-button">Submit</button>
                        </div>
                        <p id="referral-entry-message" class="info-text"></p>
                    </div>

                    <div class="referred-users-list">
                        <h4>Your Referrals (<span id="total-referrals-count">0</span>)</h4>
                        <ul id="referred-list">
                            <!-- Referred users will be listed here -->
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Withdraw Section -->
            <section id="withdraw" class="screen">
                <div class="glassmorphism-card">
                    <h3>Withdraw AS Points</h3>
                    <p class="info-text">Withdrawals are manually reviewed by admin.</p>

                    <div class="withdraw-option" id="binance-withdraw-option">
                        <div class="option-header">
                            <h4>Binance ID Redemption</h4>
                            <span class="badge">320 AS = $0.9</span>
                        </div>
                        <input type="text" id="binance-pay-id" placeholder="Enter your Binance Pay ID">
                        <button id="request-binance-withdraw-btn" class="cta-button" disabled>Request Withdrawal</button>
                        <p class="info-text" id="binance-withdraw-msg"></p>
                    </div>

                    <div class="withdraw-option" id="google-play-withdraw-option">
                        <div class="option-header">
                            <h4>Google Play Redeem Code</h4>
                            <span class="badge">210 AS = $0.5</span>
                        </div>
                        <input type="email" id="google-play-email" placeholder="Enter your email to receive code">
                        <button id="request-google-play-withdraw-btn" class="cta-button" disabled>Request Withdrawal</button>
                        <p class="info-text" id="google-play-withdraw-msg"></p>
                    </div>

                    <div class="withdrawal-history-card">
                        <h4>Withdrawal History</h4>
                        <ul id="withdrawal-history-list">
                            <!-- Withdrawal history will be rendered here -->
                            <li class="no-history-item">No withdrawal history.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Profile Section -->
            <section id="profile" class="screen">
                <div class="glassmorphism-card profile-details-card">
                    <h3>Your Profile</h3>
                    <div class="profile-info-grid">
                        <p><strong>Username:</strong> <span id="profile-tg-username"></span></p>
                        <p><strong>Telegram ID:</strong> <span id="profile-tg-id"></span></p>
                        <p><strong>Profile Name:</strong> <span id="profile-full-name"></span></p>
                        <p><strong>Join Date:</strong> <span id="profile-join-date"></span></p>
                        <p><strong>Current Balance:</strong> <span id="profile-current-balance"></span> AS Points</p>
                        <p><strong>Total Earned:</strong> <span id="profile-total-earned"></span> AS Points</p>
                        <p><strong>Total Tasks Done:</strong> <span id="profile-total-tasks"></span></p>
                        <p><strong>Current Streak:</strong> Day <span id="profile-current-streak"></span></p>
                        <p><strong>Total Referrals:</strong> <span id="profile-total-referrals"></span></p>
                    </div>
                </div>

                <div class="glassmorphism-card history-view-card">
                    <h3>Detailed History</h3>
                    <div class="history-tabs">
                        <button class="history-tab-btn active" data-history-type="tasks">Tasks History</button>
                        <button class="history-tab-btn" data-history-type="withdrawals">Withdrawals History</button>
                    </div>
                    <div id="tasks-history-view" class="history-content active">
                        <ul id="detailed-tasks-list">
                            <!-- Detailed task history will be rendered here -->
                            <li class="no-history-item">No task history.</li>
                        </ul>
                    </div>
                    <div id="withdrawals-history-view" class="history-content">
                        <ul id="detailed-withdrawals-list">
                            <!-- Detailed withdrawal history will be rendered here -->
                            <li class="no-history-item">No withdrawal history.</li>
                        </ul>
                    </div>
                </div>

                <div class="glassmorphism-card support-card">
                    <h3>Support</h3>
                    <p><a href="https://t.me/ASearnhubchat" target="_blank" class="support-link">Help Center 🤝</a></p>
                    <p><a href="https://t.me/ASEarnHubSupport_bot" target="_blank" class="support-link">Customer Support 🧑‍💻</a></p>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="#home" class="nav-item active" data-screen="home">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                <span>Home</span>
            </a>
            <a href="#ads-tasks" class="nav-item" data-screen="ads-tasks">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tv"><rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline></svg>
                <span>Ads Task</span>
            </a>
            <a href="#tg-tasks" class="nav-item" data-screen="tg-tasks">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-speaker"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><path d="M12 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"></path></svg>
                <span>TG Tasks</span>
            </a>
            <a href="#referrals" class="nav-item" data-screen="referrals">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-users"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                <span>Refer</span>
            </a>
            <a href="#withdraw" class="nav-item" data-screen="withdraw">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-dollar-sign"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
                <span>Withdraw</span>
            </a>
            <a href="#profile" class="nav-item" data-screen="profile">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                <span>Profile</span>
            </a>
        </nav>

        <!-- Global Toast Notifications -->
        <div id="toast-container"></div>
    </div>

    <!-- Particle effect for check-in animation -->
    <div id="checkin-particles"></div>

    <script type="module" src="firebaseConfig.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>